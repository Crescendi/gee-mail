<!DOCTYPE html >

<html>
	<head>
		<meta charset="utf-8">
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" type="text/css" media="screen">
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Cabin+Sketch:400,700|Fredericka+the+Great' rel='stylesheet' type='text/css'>
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        // run over the geemails array which has object elements with sender, subject date properties and string values
        // a) cretae rows of emails: create a new node-div w classname-clEmailRow, and 
        // b) inside the div create three new node-p w classnames for sender, subject and date separately 
        // c) set three variable for geting the strings value from the object's tsender, subject and date properties of geemails array at the current position 
        // d) cut off the time,GMT, etc part of the date 
        // e) append the strings held by addSender, addSubject and addDate variables into the appropriate p nodes and append the p nodes into the emailRow div 
        // f) append the emailRows div at the end of the main div of the HTML

console.log("window.geemails", window.geemails);
        for (var i = 0; i < geemails.length; i++) {

        	var emailRow = document.createElement('div');
        	emailRow.className = "clEmailRow";

        	var emailRowBox1 = document.createElement('div');
        	emailRowBox1.className = "clSender";

        	var emailRowBox2 = document.createElement('div');
        	emailRowBox2.className = "clSubject";

        	var emailRowBox3 = document.createElement('div');
        	emailRowBox3.className = "clDate";

        	var emailRowBox4 = document.createElement('div');
        	emailRowBox4.className = "clBody";


        	//var addSender = document.createTextNode(geemails[i].sender);
        	emailRowBox1.innerHTML = geemails[i].sender;
        	var addSubject = document.createTextNode(geemails[i].subject);
        	var addDate = document.createTextNode(geemails[i].date.toDateString());
        	var addBody = document.createTextNode(geemails[i].body);

        	//emailRowBox1.appendChild(addSender);
        	emailRowBox2.appendChild(addSubject);
        	emailRowBox3.appendChild(addDate);
        	emailRowBox4.appendChild(addBody);

        	emailRowBox2.appendChild(emailRowBox4); //a subject div ala van berakva a body
        	emailRow.appendChild(emailRowBox1);
        	emailRow.appendChild(emailRowBox2);
        	emailRow.appendChild(emailRowBox3);
        	

        	main.appendChild(emailRow);

        	console.log(geemails);
        	console.log(emailRow);
        }
        
 // styling emailRows div by using classname
 
        var x = document.getElementsByClassName("clEmailRow");
        var numberOfEmails = x.length;
        //console.log(numberOfEmails);

        for (var i = 0; i < x.length; i++) {
        	if (i%2 === 0) {
        		x[i].style.backgroundColor = "#f0f0f0";
        	}else{
        		x[i].style.backgroundColor = "white";
        	}
        } //close of l70

// button into the actionHeader
	var composeButton = document.createElement('button');
		composeButton.id = "compButton";
	var buttonText = document.createTextNode("COMPOSE");
		composeButton.appendChild(buttonText);
		actionHeader.appendChild(composeButton);

// dynamic styling 
		var buttonStyle = document.createElement('style');
		buttonStyle.type = "text/css";
		buttonStyle.innerHTML = "#compButton {background-color: crimson; color: white; font-size: 14px; padding: 10px}";
		document.getElementsByTagName("head")[0].appendChild(buttonStyle);

// horizontal line
		var hLine = document.createElement('div');
		hLine.id = "line";
		hLine.innerHTML = "";
		actionHeader.appendChild(hLine);


// create nav list with a tag and show number of emails after Inbox
		var navigationMenu = [{type: "href", link: "", text:"Inbox"},{type: "href", link: "", text:"Important"},{type: "href", link: "", text:"Sent"},{type: "href", link: "", text:"Drafts"},{type: "href", link: "", text:"Deleted"}];
		for (var i = 0; i < navigationMenu.length; i++) {
			var navList = document.createElement('li');
			navList.className = "navigationList";
			var xAtag = document.createElement('a');
			xAtag.setAttribute(navigationMenu[i].type, navigationMenu[i].link);
			if (i===0) {
				xAtag.innerHTML = navigationMenu[i].text + " ( " + numberOfEmails + " )";
			}else{
				xAtag.innerHTML = navigationMenu[i].text;

			}			
			// navList.innerHTML = navigationMenu[i];  if list is not a link
			navList.appendChild(xAtag);
			navigation.appendChild(navList);
		}
		console.log(navigation);


// footer div
		var hLine2 = document.createElement('div');
		hLine2.id = "line";
		hLine.innerHTML = "";
		footer.appendChild(hLine2);

		var copyRight = document.createElement('p');
		copyRight.id = "cprText";
		copyRight.innerHTML = "Copyright &copy; 2016";
		footer.appendChild(copyRight);

// click on button
		document.getElementById("compButton").onclick = function() {composeNewMail()};
		function composeNewMail(){
			document.getElementById("compButton").innerHTML = "New Mail!";
			//document.getElementById("compButton").style.border = "3px solid white";
		}

// click on Sender to show Body
		var classOfSubjects = [];
		classOfSubjects = document.getElementsByClassName("clSubject");
		console.log("class of subject",classOfSubjects);
		for (var i = 0; i < classOfSubjects.length; i++) {
		 	classOfSubjects[i].addEventListener("click",showEmailBody);
		}
	
		function showEmailBody(){
			var showBody = this.querySelectorAll('.clBody')[0];
			console.log("showbody by querySelectorAll",showBody);
			  if(showBody.style.display === 'none'){
			    showBody.style.display = "block";
			  }else{
			    showBody.style.display = "none";
			  }
		}
// 


        
      };
    </script>
    <title> Gee Mail</title>
	</head>
	<body>
		<div id="container">
			<div id="header">
				<img id="toppic" src="images/pokemon1.png" alt="geemail" title="source:devianart.com">
				<h1 > G E E <span style="color:red">m</span> A I L</h1>
			</div> <!-- eof header -->
			
			<div id="actionHeader">	
			</div> <!-- eof actionHeadLine -->

			<div id="content">

				<div id="navigation">
				</div> <!-- eof nav -->

				<div id="main">
				
				</div> <!-- eof main -->	
			</div> <!-- eof content -->

			<div id="footer">
			</div> <!-- eof footer -->

		</div> <!-- eof container -->
	</body>
</html>